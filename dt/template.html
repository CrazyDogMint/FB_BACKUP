<!DOCTYPE HTML>
<html ng-app="myApp">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Template</title>
	<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular.min.js"></script>
	<script src="//connect.facebook.net/zh_TW/sdk.js" id="facebook-jssdk"></script>
	<script src="../js/fbsdk-config.js"></script>
	<script src="../js/fbsdk-extend.js"></script>
	<script>
		/*
		 * Just modify `main` to what you want. The return value of `main`
		 * is assgined to `$scope.model` to let AngularJS bind data to.
		 * `main` can be defined elsewhere, but note that you shall
		 * call `$scope.$apply` manually after async functions return,
		 * which means you have to access `$scope.$apply` in `main`.
		 *
		 * If you're also using Facebook SDK for PHP, note that
		 * login with link of `FacebookRedirectLoginHelper::getLoginUrl`
		 * would also make SDK for JS know the login status. Therefore,
		 * you don't have to make user login twice even if you're working
		 * on a site using both SDKs for PHP and JS.
		 */
		FB.init(FBConfig);
		angular.module("myApp", []).controller("main", function($scope) {
			FB.getLoginStatus(function(r) {
				$scope.model = main(r.authResponse ? r.authResponse.userID : "");
				$scope.$apply();
			});
			var main = function(userID) {
				var model = {};

				model.title = "Template";
				model.foo = function(){ return "bar"; };
				if(userID) {
					FB.apiwt("/me", function(res) {
						model.userInfo = res;
						$scope.$apply();
					});
				}

				return model;
			};
		});
	</script>
	<link rel="stylesheet" href="../styles/std.css">
	<style>
		#wrapper > footer {
			background: #ccc;
			border-top: 1px solid #888;
			text-align: center;
		}
	</style>
</head>
<body ng-controller="main">
	<div id="wrapper">
		<header>
			<h1>{{model.title}}</h1>
			<p>{{model.foo()}}</p>
		</header>
		<section>
			<pre>{{model|json}}</pre>
		</section>
		<footer>Footer</footer>
	</div>
</body>
</html>
