<!DOCTYPE HTML>
<html ng-app="myApp">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Template</title>
	<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular.min.js"></script>
	<script src="//connect.facebook.net/zh_TW/sdk.js" id="facebook-jssdk"></script>
	<script src="../js/fbsdk-config.js"></script>
	<script src="../js/fbsdk-extend.js"></script>
	<script>
		/*
		 * Just modify `main` to what you want. The return value of `main`
		 * is assgined to `$scope.model` to let AngularJS bind data to.
		 * `main` can be defined elsewhere, but note that you shall
		 * call `$scope.$apply` manually after async functions return,
		 * which means you have to access `$scope.$apply` in `main`.
		 *
		 * If you're also using Facebook SDK for PHP, note that
		 * login with link of `FacebookRedirectLoginHelper::getLoginUrl`
		 * would also make SDK for JS know the login status. Therefore,
		 * you don't have to make user login twice even if you're working
		 * on a site using both SDKs for PHP and JS.
		 */
		FB.init(FBConfig);
		angular.module("myApp", []).controller("main", function($scope) {
		
			// This shall be replaced when the next line returns.
			// Leave it here to check whether FB SDK loads successfully.
			$scope.model = {message: "Facebook SDK for JavaScript hasn't loaded."};
			
			FB.getLoginStatus(function(r) {
				$scope.model = main(r.authResponse ? r.authResponse.userID : "");
				$scope.$apply();
			});
			
			var main = function(userID) {
				var model = {};

				model.title = "Page Title";
				model.foo = function(){ return "bar"; };
				if(userID) {
					FB.apiwt("/me", function(res) {
						model.userInfo = res;
						$scope.$apply();
					});
				}

				return model;
			};
		});
	</script>
	<link rel="stylesheet" href="../styles/std.css">
	<link rel="stylesheet" href="../styles/main.css">
</head>
<body ng-controller="main">
	<div id="wrapper">
		<header>
			<span id="brand">Site Name</span>
			<nav>
				<ul class="navList">
					<li>Tab 1</li>
					<li>Tab 2</li>
					<li>Tab 3</li>
					<li>Tab 4</li>
					<li>Tab 5</li>
				</ul>
			</nav>
			<form class="searchBar">
				<input type="name">
				<input type="submit">
			</form>
		</header>
		<section>
			<h1>{{model.title}}</h1>
			<p>{{model.foo()}}</p>
			<div class="dlTable">
				<dl><dt>OK</dt><dd>200</dd></dl>
				<dl><dt>Not Found</dt><dd>404</dd></dl>
				<dl><dt>Internal Server Error</dt><dd>500</dd></dl>
			</div>
			<pre>{{model|json}}</pre>
		</section>
		<footer>Footer</footer>
	</div>
</body>
</html>
